<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="images/logo/logo.ico" type="image/x-icon" />
  <title>CHCNAV Design - Web交互设计规范</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --color-bg: #f5f5f5;
      --color-surface: #ffffff;
      --color-border: #f0f0f0;
      --color-text: #000000d9;
      --color-text-secondary: #000000bf;
      --color-text-tertiary: #00000040;
      --color-primary: #F58D11;
      --color-primary-hover: #e67e00;
      --color-accent: #fa8c16;
      --radius-sm: 6px;
      --radius-md: 8px;
      --font-sans: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
    }

    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; overflow-x: hidden; }
    html::-webkit-scrollbar, body::-webkit-scrollbar { width: 6px; }
    html::-webkit-scrollbar-track, body::-webkit-scrollbar-track { background: transparent; }
    html::-webkit-scrollbar-thumb, body::-webkit-scrollbar-thumb { background: transparent; border-radius: 3px; transition: background .2s; }
    html:hover::-webkit-scrollbar-thumb, body:hover::-webkit-scrollbar-thumb,
    html.is-scrolling::-webkit-scrollbar-thumb, body.is-scrolling::-webkit-scrollbar-thumb { background: rgba(0,0,0,.15); }
    html::-webkit-scrollbar-thumb:hover, body::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,.25); }
    body {
      margin: 0;
      overflow-x: hidden;
      font-family: var(--font-sans);
      font-size: 14px;
      line-height: 1.5715;
      color: var(--color-text);
      background: var(--color-bg);
    }

    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      box-shadow: 0 1px 2px rgba(0,0,0,.03);
    }
    .app-header-inner {
      max-width: 100%;
      margin: 0 auto;
      padding: 0 var(--space-lg);
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-lg);
    }
    .app-logo {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      color: var(--color-text);
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      flex-shrink: 0;
    }
    .app-logo-mark {
      width: 32px;
      height: 32px;
      flex-shrink: 0;
    }
    .app-logo-mark img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .header-search {
      flex: 1;
      max-width: 400px;
      margin: 0 var(--space-lg);
      position: relative;
    }
    .search-results {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      margin-top: 4px;
      max-height: 320px;
      overflow-y: auto;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      box-shadow: 0 4px 12px rgba(0,0,0,.12);
      z-index: 200;
    }
    .search-results.show {
      display: block;
    }
    .search-results a {
      display: block;
      padding: 10px 16px;
      font-size: 14px;
      color: var(--color-text);
      text-decoration: none;
      border-bottom: 1px solid var(--color-border);
    }
    .search-results a:last-child { border-bottom: none; }
    .search-results a:hover {
      background: var(--color-bg);
      color: var(--color-primary);
    }
    .search-results a:hover .search-snippet { color: var(--color-text-secondary); }
    .search-results .search-title { font-weight: 600; display: block; margin-bottom: 4px; }
    .search-results .search-snippet { font-size: 12px; color: var(--color-text-tertiary); line-height: 1.5; display: block; }
    .search-results .search-highlight { background: rgba(245,141,17,.25); color: var(--color-primary); padding: 0 2px; border-radius: 2px; }
    .search-results .empty { padding: 16px; color: var(--color-text-tertiary); font-size: 13px; }
    #content-body mark.search-highlight {
      background: rgba(245,141,17,.25);
      color: inherit;
      padding: 0 2px;
      border-radius: 2px;
    }
    .header-search input {
      width: 100%;
      height: 36px;
      padding: 0 40px 0 36px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: 14px;
      background: var(--color-bg);
      outline: none;
      transition: border-color .2s, background .2s;
    }
    .header-search input::placeholder { color: var(--color-text-tertiary); }
    .header-search input:focus {
      border-color: var(--color-primary);
      background: var(--color-surface);
    }
    .header-search .icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      color: var(--color-text-tertiary);
      pointer-events: none;
    }
    .header-search .kbd {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      padding: 2px 6px;
      font-size: 12px;
      color: var(--color-text-tertiary);
      background: var(--color-border);
      border-radius: 4px;
      pointer-events: none;
    }
    .header-actions {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      flex-shrink: 0;
    }
    .header-version {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: 12px;
      color: var(--color-text-secondary);
      cursor: pointer;
    }
    .header-version::after {
      content: '';
      border: 4px solid transparent;
      border-top-color: currentColor;
      margin-left: 4px;
    }
    .header-icon {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-text-secondary);
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 16px;
    }
    .header-icon:hover { color: var(--color-primary); background: rgba(245,141,17,.08); }
    .header-icon.gh { padding: 4px; }

    .app-layout {
      display: flex;
      max-width: 100%;
      min-height: calc(100vh - 64px);
      padding-top: 64px;
    }
    .side-nav {
      position: fixed;
      left: 0;
      top: 64px;
      width: 300px;
      height: calc(100vh - 64px);
      overflow-y: auto;
      overflow-y: overlay;
      background: var(--color-surface);
      border-right: 1px solid var(--color-border);
      padding: var(--space-md) 0;
      z-index: 10;
    }
    .side-nav::-webkit-scrollbar { width: 6px; }
    .side-nav::-webkit-scrollbar-track { background: transparent; }
    .side-nav::-webkit-scrollbar-thumb { background: transparent; border-radius: 3px; transition: background .2s; }
    .side-nav:hover::-webkit-scrollbar-thumb,
    .side-nav.is-scrolling::-webkit-scrollbar-thumb { background: rgba(0,0,0,.15); }
    .side-nav::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,.25); }
    .side-nav-group {
      margin-bottom: var(--space-sm);
    }
    .side-nav-group-title {
      padding: 8px 24px;
      font-size: 13px;
      font-weight: 600;
      color: var(--color-text);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .side-nav-group-title:hover { color: var(--color-primary); }
    .side-nav-group-title .arrow {
      font-size: 10px;
      color: var(--color-text-tertiary);
      transition: transform .2s;
    }
    .side-nav-group.open .side-nav-group-title .arrow { transform: rotate(180deg); }
    .side-nav-items {
      padding: 4px 0;
      display: none;
    }
    .side-nav-group.open .side-nav-items {
      display: block;
    }
    .side-nav-item {
      display: block;
      margin: 2px 8px;
      padding: 8px 20px 8px 28px;
      font-size: 14px;
      color: #00000099;
      text-decoration: none;
      border-right: 3px solid transparent;
      border-radius: 6px;
    }
    .side-nav-item:hover {
      color: var(--color-text);
      background: var(--color-bg);
    }
    .side-nav-item.active {
      color: var(--color-primary);
      font-weight: 500;
      background: rgba(245,141,17,.08);
    }
    .side-nav-subgroup {
      margin-bottom: var(--space-sm);
    }
    .side-nav-subgroup-title {
      padding: 6px 24px 4px 28px;
      font-size: 12px;
      font-weight: 500;
      color: var(--color-text-tertiary);
    }
    .side-nav-subgroup-items {
      padding: 2px 0;
    }
    .side-nav-subgroup .side-nav-item {
      padding-left: 36px;
    }
    @media (max-width: 900px) {
      .side-nav { display: none; }
      .main-content { margin-left: 0; }
      .header-search { display: none; }
    }

    .main-content {
      flex: 1;
      min-width: 0;
      min-height: calc(100vh - 64px);
      margin-left: 300px;
      display: flex;
      flex-direction: column;
      background: var(--color-surface);
    }
    .content-area {
      flex: 1;
      min-width: 0;
      display: flex;
      gap: var(--space-xl);
      padding: var(--space-2xl) var(--space-2xl) var(--space-lg);
      align-items: flex-start;
    }
    .content-inner {
      flex: 1;
      min-width: 0;
      max-width: 800px;
      overflow-x: hidden;
    }
    .anchor-nav {
      position: fixed;
      top: 88px;
      right: 50px;
      width: 140px;
      padding: var(--space-md) 0;
      z-index: 10;
    }
    .anchor-nav-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--color-text-tertiary);
      margin-bottom: var(--space-sm);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .anchor-nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 13px;
    }
    .anchor-nav-list a {
      display: block;
      padding: 4px 0;
      color: var(--color-text-secondary);
      text-decoration: none;
      border-left: 2px solid transparent;
      padding-left: 12px;
      margin-left: 0;
    }
    .anchor-nav-list a:hover { color: var(--color-primary); }
    .anchor-nav-list a.active { color: var(--color-primary); border-left-color: var(--color-primary); font-weight: 500; }
    .anchor-nav-list .anchor-h3 { padding-left: 20px; font-size: 12px; }
    @media (min-width: 1281px) {
      .content-area { padding-right: 200px; }
    }
    @media (max-width: 1280px) {
      .anchor-nav { display: none; }
      .content-area { padding-right: var(--space-2xl); }
    }
    .hero {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-lg);
      border-bottom: 1px solid var(--color-border);
    }
    .hero h1 {
      font-size: 38px;
      font-weight: 700;
      margin: 0 0 var(--space-md);
      letter-spacing: -0.02em;
      line-height: 1.23;
    }
    .hero p {
      color: var(--color-text);
      font-size: 16px;
      line-height: 1.6;
      margin: 0;
    }
    .hero-eyebrow {
      display: none;
    }
    #content-body h2 {
      font-size: 24px;
      font-weight: 600;
      margin: var(--space-2xl) 0 var(--space-md);
      letter-spacing: -0.01em;
    }
    #content-body h2:first-of-type { margin-top: 0; }
    #content-body h3 {
      font-size: 16px;
      font-weight: 600;
      margin: var(--space-lg) 0 var(--space-sm);
      color: var(--color-text);
    }
    #content-body {
      overflow-wrap: break-word;
      word-wrap: break-word;
    }
    #content-body .img-wrapper {
      display: inline-block;
      background: #f5f5f5;
      padding: var(--space-md);
      border-radius: var(--radius-md);
      margin: var(--space-sm) 0;
      cursor: pointer;
      max-width: 80%;
      text-decoration: none;
      color: inherit;
    }
    #content-body .img-wrapper:hover {
      background: #ebebeb;
    }
    #content-body .img-wrapper img {
      display: block;
      max-width: 100%;
      height: auto;
      vertical-align: middle;
    }
    .img-preview-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.6);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: var(--space-xl);
      cursor: pointer;
    }
    .img-preview-overlay.show {
      display: flex;
    }
    .img-preview-overlay .img-preview-inner {
      cursor: default;
      max-width: 90%;
      max-height: 90vh;
    }
    .img-preview-overlay .img-preview-inner img {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
      display: block;
    }
    #content-body p {
      color: var(--color-text-secondary);
      font-size: 14px;
      line-height: 1.7;
      margin: 0 0 var(--space-md);
    }
    #content-body ul {
      padding-left: 1.5em;
      margin: 0 0 var(--space-md);
      color: var(--color-text-secondary);
      font-size: 14px;
      line-height: 1.7;
    }
    #content-body li { margin-bottom: 4px; }
    #content-body hr {
      border: none;
      border-top: 1px solid var(--color-border);
      margin: var(--space-lg) 0;
    }
    #content-body table {
      width: auto;
      max-width: 100%;
      border-collapse: collapse;
      margin: var(--space-md) 0 var(--space-lg);
      font-size: 14px;
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,.04);
    }
    #content-body thead {
      background: linear-gradient(180deg, #fafafa 0%, #f5f5f5 100%);
    }
    #content-body th {
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 13px;
      color: var(--color-text);
      border-bottom: 1px solid var(--color-border);
      letter-spacing: 0.02em;
    }
    #content-body td {
      padding: 12px 16px;
      color: var(--color-text-secondary);
      border-bottom: 1px solid var(--color-border);
      line-height: 1.6;
    }
    #content-body tbody tr:last-child td {
      border-bottom: none;
    }
    #content-body tbody tr:hover {
      background: rgba(0,0,0,.04);
    }

    .value-quote {
      margin: var(--space-lg) 0;
      padding: var(--space-lg) var(--space-xl);
      background: var(--color-bg);
      border-left: 4px solid var(--color-primary);
      border-radius: 0 var(--radius-md) var(--radius-md) 0;
    }
    .value-quote p { margin: 0; font-size: 15px; line-height: 1.7; }
    .value-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--space-lg);
      margin-top: var(--space-md);
    }
    .value-card {
      padding: var(--space-lg);
      background: var(--color-bg);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
    }
    .value-card h4 {
      margin: 0 0 var(--space-sm);
      font-size: 16px;
      font-weight: 600;
      color: var(--color-primary);
    }
    .value-card p { margin: 0; font-size: 14px; line-height: 1.7; }

    .layout-dual {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-xl);
      align-items: start;
      margin: var(--space-lg) 0;
    }
    .layout-dual .layout-text { min-width: 0; }
    .layout-dual .layout-img {
      position: sticky;
      top: 88px;
      background: var(--color-bg);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
      overflow: hidden;
    }
    .layout-dual .layout-img img {
      display: block;
      width: 100%;
      height: auto;
    }
    .layout-dual .layout-img .placeholder {
      aspect-ratio: 4/3;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--color-text-tertiary);
      font-size: 14px;
      background: var(--color-bg);
    }
    @media (max-width: 768px) {
      .layout-dual {
        grid-template-columns: 1fr;
      }
      .layout-dual .layout-img { position: static; }
    }

    footer {
      flex-shrink: 0;
      margin-top: auto;
      text-align: center;
      padding: var(--space-lg);
      color: var(--color-text-tertiary);
      font-size: 12px;
      border-top: 1px solid var(--color-border);
      background: var(--color-surface);
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="app-header-inner">
      <a href="#" class="app-logo">
        <span class="app-logo-mark"><img src="images/logo/logo.svg" alt="CHCNAV" /></span>
        <span>CHCNAV Design - Web</span>
      </a>
      <div class="header-search">
        <svg class="icon" viewBox="0 0 1024 1024" fill="currentColor"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116 65.6-158.4C296 211.3 352.2 188 412 188s116 23.3 158.4 65.6S636 352.2 636 412s-23.3 116-65.6 158.4z"/></svg>
        <input type="text" id="header-search-input" placeholder="输入关键字搜索..." autocomplete="off" />
        <span class="kbd">⌘K</span>
        <div id="search-results" class="search-results"></div>
      </div>
      <div class="header-actions">
        <div class="header-version">1.0.0 </div>
      </div>
    </div>
  </header>

  <main class="app-layout">
    <aside class="side-nav">
      <div class="side-nav-group open">
        <div class="side-nav-group-title">CHCNAV Design - Web<span class="arrow">▲</span></div>
        <div class="side-nav-items">
          <a href="#" class="side-nav-item active" data-content="content/chcnav/values.md">设计价值观</a>
        </div>
      </div>
      <div class="side-nav-group open">
        <div class="side-nav-group-title">交互规范文档 <span class="arrow">▲</span></div>
        <div class="side-nav-items">
          <a href="#" class="side-nav-item" data-content="content/guide/feedback.md">反馈</a>
          <a href="#" class="side-nav-item" data-content="content/guide/nav.md">导航</a>
          <a href="#" class="side-nav-item" data-content="content/guide/status.md">状态展示</a>
          <a href="#" class="side-nav-item" data-content="content/guide/hotzone.md">交互热区</a>
          <a href="#" class="side-nav-item" data-content="content/guide/flow.md">页面流转</a>
          <a href="#" class="side-nav-item" data-content="content/guide/responsive.md">响应式设计</a>
        </div>
      </div>
      <div class="side-nav-group open">
        <div class="side-nav-group-title">交互原型库（场景范例） <span class="arrow">▲</span></div>
        <div class="side-nav-items">
          <a href="#" class="side-nav-item" data-content="content/prototype/list.md">列表页</a>
          <a href="#" class="side-nav-item" data-content="content/prototype/form.md">表单页</a>
          <a href="#" class="side-nav-item" data-content="content/prototype/result.md">结果页</a>
          <a href="#" class="side-nav-item" data-content="content/prototype/error.md">异常页</a>
        </div>
      </div>
      <div class="side-nav-group open">
        <div class="side-nav-group-title">组件说明 <span class="arrow">▲</span></div>
        <div class="side-nav-items">
          <div class="side-nav-subgroup">
            <div class="side-nav-subgroup-title">基础组件 Base</div>
            <div class="side-nav-subgroup-items">
              <a href="#" class="side-nav-item" data-content="content/components/button.md">Button（按钮）</a>
            </div>
          </div>
        <div class="side-nav-items">
          <div class="side-nav-subgroup">
            <div class="side-nav-subgroup-title">数据输入类 Data Input</div>
            <div class="side-nav-subgroup-items">
              <a href="#" class="side-nav-item" data-content="content/components/input.md">Input（输入框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/inputnumber.md">InputNumber（数字输入框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/select.md">Select（选择器）</a>
              <a href="#" class="side-nav-item" data-content="content/components/upload.md">Upload（上传）</a>
              <a href="#" class="side-nav-item" data-content="content/components/radio.md">Radio（单选框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/checkbox.md">Checkbox（多选框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/switch.md">Switch（开关）</a>
              <a href="#" class="side-nav-item" data-content="content/components/slider.md">Slider（滑块）</a>
              <a href="#" class="side-nav-item" data-content="content/components/form.md">Form（表单）</a>
            </div>
          </div>
          <div class="side-nav-subgroup">
            <div class="side-nav-subgroup-title">通知反馈类 Feedback</div>
            <div class="side-nav-subgroup-items">
              <a href="#" class="side-nav-item" data-content="content/components/alert.md">Alert（警告提示）</a>
              <a href="#" class="side-nav-item" data-content="content/components/message.md">Message（全局提示）</a>
              <a href="#" class="side-nav-item" data-content="content/components/dialog.md">Dialog（对话框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/notification.md">Notification（通知提醒框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/drawer.md">Drawer（抽屉）</a>
              <a href="#" class="side-nav-item" data-content="content/components/popconfirm.md">Popconfirm（气泡确认框）</a>
              <a href="#" class="side-nav-item" data-content="content/components/loading.md">Loading（加载中）</a>
            </div>
          </div>
          <div class="side-nav-subgroup">
            <div class="side-nav-subgroup-title">数据展示类 Data Display</div>
            <div class="side-nav-subgroup-items">
              <a href="#" class="side-nav-item" data-content="content/components/avatar.md">Avatar（头像）</a>
              <a href="#" class="side-nav-item" data-content="content/components/tag.md">Tag（标签）</a>
              <a href="#" class="side-nav-item" data-content="content/components/badge.md">Badge（徽标）</a>
              <a href="#" class="side-nav-item" data-content="content/components/progress.md">Progress（进度条）</a>
              <a href="#" class="side-nav-item" data-content="content/components/timeline.md">Timeline（时间轴）</a>
              <a href="#" class="side-nav-item" data-content="content/components/card.md">Card（卡片）</a>
              <a href="#" class="side-nav-item" data-content="content/components/table.md">Table（表格）</a>
            </div>
          </div>
          <div class="side-nav-subgroup">
            <div class="side-nav-subgroup-title">导航类 Navigation</div>
            <div class="side-nav-subgroup-items">
              <a href="#" class="side-nav-item" data-content="content/components/breadcrumb.md">Breadcrumb（面包屑）</a>
              <a href="#" class="side-nav-item" data-content="content/components/dropdown.md">Dropdown（下拉菜单）</a>
              <a href="#" class="side-nav-item" data-content="content/components/pagination.md">Pagination（分页器）</a>
              <a href="#" class="side-nav-item" data-content="content/components/steps.md">Steps（步骤组件）</a>
              <a href="#" class="side-nav-item" data-content="content/components/tabs.md">Tabs（标签页）</a>
              <a href="#" class="side-nav-item" data-content="content/components/menu.md">Menu（导航菜单）</a>
            </div>
          </div>
        </div>
      </div>
      <div class="side-nav-group open">
        <div class="side-nav-group-title">Token交互参数表 <span class="arrow">▲</span></div>
        <div class="side-nav-items">
          <a href="#" class="side-nav-item" data-content="content/token.md">待补充</a>
        </div>
      </div>
    </aside>

    <div class="main-content">
      <div class="content-area">
        <div class="content-inner">
          <div id="content-body"></div>
        </div>
        <aside class="anchor-nav">
          <ul id="anchor-nav-list" class="anchor-nav-list"></ul>
        </aside>
      </div>
      <footer>
        CHCNAV Design · Web端交互设计规范
      </footer>
    </div>
  </main>

  <div id="img-preview-overlay" class="img-preview-overlay" aria-hidden="true"></div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    function loadContent(file, highlightTerm) {
      fetch(file)
        .then(r => r.text())
        .then(md => {
          document.getElementById('content-body').innerHTML = marked.parse(md);
          if (highlightTerm && highlightTerm.length >= 1) {
            highlightInContent(document.getElementById('content-body'), highlightTerm);
          }
          wrapContentImages();
          buildAnchorNav();
        })
        .catch(() => {
          document.getElementById('content-body').innerHTML = '<p>加载失败，请确保文件存在。</p>';
          document.getElementById('anchor-nav-list').innerHTML = '';
        });
    }
    function highlightInContent(container, term) {
      var walker = document.createTreeWalker(container, NodeFilter.SHOW_TEXT, null, false);
      var nodes = [];
      while (walker.nextNode()) nodes.push(walker.currentNode);
      var escaped = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      var regex = new RegExp('(' + escaped + ')', 'gi');
      nodes.forEach(function(node) {
        var text = node.textContent;
        if (text.toLowerCase().indexOf(term.toLowerCase()) < 0) return;
        var frag = document.createDocumentFragment();
        var parts = text.split(new RegExp('(' + escaped + ')', 'gi'));
        parts.forEach(function(p) {
          if (p.toLowerCase() === term.toLowerCase()) {
            var mark = document.createElement('mark');
            mark.className = 'search-highlight';
            mark.textContent = p;
            frag.appendChild(mark);
          } else {
            frag.appendChild(document.createTextNode(p));
          }
        });
        node.parentNode.replaceChild(frag, node);
      });
    }
    function wrapContentImages() {
      var body = document.getElementById('content-body');
      var overlay = document.getElementById('img-preview-overlay');
      body.querySelectorAll('img').forEach(function(img) {
        if (img.closest('.img-wrapper')) return;
        var wrapper = document.createElement('div');
        wrapper.className = 'img-wrapper';
        img.parentNode.insertBefore(wrapper, img);
        wrapper.appendChild(img);
        wrapper.addEventListener('click', function() {
          var inner = document.createElement('div');
          inner.className = 'img-preview-inner';
          inner.addEventListener('click', function(e) { e.stopPropagation(); });
          var previewImg = document.createElement('img');
          previewImg.src = img.src;
          previewImg.alt = img.alt || '';
          inner.appendChild(previewImg);
          overlay.innerHTML = '';
          overlay.appendChild(inner);
          overlay.classList.add('show');
          overlay.setAttribute('aria-hidden', 'false');
          document.body.style.overflow = 'hidden';
        });
      });
    }
    document.getElementById('img-preview-overlay').addEventListener('click', function() {
      this.classList.remove('show');
      this.innerHTML = '';
      this.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    });
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        var overlay = document.getElementById('img-preview-overlay');
        if (overlay.classList.contains('show')) {
          overlay.classList.remove('show');
          overlay.innerHTML = '';
          overlay.setAttribute('aria-hidden', 'true');
          document.body.style.overflow = '';
        }
      }
    });
    function buildAnchorNav() {
      var body = document.getElementById('content-body');
      var list = document.getElementById('anchor-nav-list');
      var headings = body.querySelectorAll('h2, h3');
      list.innerHTML = '';
      headings.forEach(function(h, i) {
        if (!h.id) h.id = 'anchor-' + i;
        var li = document.createElement('li');
        var a = document.createElement('a');
        a.href = '#' + h.id;
        a.textContent = h.textContent.trim();
        a.className = h.tagName === 'H3' ? 'anchor-h3' : '';
        a.addEventListener('click', function(e) {
          e.preventDefault();
          h.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
        li.appendChild(a);
        list.appendChild(li);
      });
      updateAnchorHighlight();
    }
    function updateAnchorHighlight() {
      var body = document.getElementById('content-body');
      var list = document.getElementById('anchor-nav-list');
      var headings = body.querySelectorAll('h2, h3');
      var threshold = 120;
      var activeId = null;
      for (var i = headings.length - 1; i >= 0; i--) {
        var rect = headings[i].getBoundingClientRect();
        if (rect.top <= threshold) {
          activeId = headings[i].id;
          break;
        }
      }
      if (!activeId && headings.length) activeId = headings[0].id;
      list.querySelectorAll('a').forEach(function(a) {
        a.classList.toggle('active', a.getAttribute('href') === '#' + activeId);
      });
    }
    loadContent('content/chcnav/values.md');

    // 顶部搜索（支持标题 + 页面内容）
    var searchInput = document.getElementById('header-search-input');
    var searchResults = document.getElementById('search-results');
    var searchIndex = [];
    document.querySelectorAll('.side-nav-item[data-content]').forEach(function(item) {
      searchIndex.push({ text: item.textContent.trim(), file: item.getAttribute('data-content'), content: '' });
    });
    Promise.all(searchIndex.map(function(item) {
      return fetch(item.file).then(function(r) { return r.text(); }).then(function(t) {
        item.contentRaw = t || '';
        item.content = (t || '').toLowerCase();
        return item;
      }).catch(function() { return item; });
    })).then(function() {});
    function getSnippet(raw, q, maxLen) {
      if (!raw) return '';
      var lower = raw.toLowerCase();
      var pos = lower.indexOf(q);
      if (pos < 0) return '';
      var start = Math.max(0, pos - maxLen);
      var end = Math.min(raw.length, pos + q.length + maxLen);
      var s = raw.slice(start, end).replace(/#{1,6}\s?|\*{1,2}|`|\[|\]|\(|\)/g, ' ').replace(/\s+/g, ' ').trim();
      if (start > 0) s = '...' + s;
      if (end < raw.length) s = s + '...';
      return s;
    }
    function highlightKeyword(text, q) {
      if (!q || !text) return text;
      var re = new RegExp('(' + q.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
      return text.replace(re, '<span class="search-highlight">$1</span>');
    }
    function doSearch() {
      var q = (searchInput.value || '').trim().toLowerCase();
      searchResults.innerHTML = '';
      searchResults.classList.remove('show');
      if (q.length < 1) return;
      var matches = searchIndex.filter(function(item) {
        return item.text.toLowerCase().indexOf(q) >= 0 || (item.content && item.content.indexOf(q) >= 0);
      });
      if (matches.length === 0) {
        searchResults.innerHTML = '<div class="empty">未找到匹配结果</div>';
      } else {
        matches.forEach(function(item) {
          var snippet = '';
          if (item.content && item.content.indexOf(q) >= 0 && item.contentRaw) {
            snippet = getSnippet(item.contentRaw, q, 40);
          } else if (item.text.toLowerCase().indexOf(q) >= 0) {
            snippet = item.text;
          }
          var a = document.createElement('a');
          a.href = '#';
          var titleEl = document.createElement('span');
          titleEl.className = 'search-title';
          titleEl.innerHTML = highlightKeyword(item.text, searchInput.value.trim());
          a.appendChild(titleEl);
          if (snippet) {
            var snippetEl = document.createElement('span');
            snippetEl.className = 'search-snippet';
            snippetEl.innerHTML = highlightKeyword(snippet, searchInput.value.trim());
            a.appendChild(snippetEl);
          }
          a.addEventListener('click', function(e) {
            e.preventDefault();
            var q = searchInput.value.trim();
            loadContent(item.file, q);
            document.querySelectorAll('.side-nav-item.active').forEach(function(x) { x.classList.remove('active'); });
            document.querySelectorAll('.side-nav-item[data-content]').forEach(function(x) {
              if (x.getAttribute('data-content') === item.file) x.classList.add('active');
            });
            searchInput.value = '';
            searchResults.classList.remove('show');
          });
          searchResults.appendChild(a);
        });
      }
      searchResults.classList.add('show');
    }
    searchInput.addEventListener('input', function() { doSearch(); });
    searchInput.addEventListener('focus', function() { if (searchInput.value.trim()) doSearch(); });
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.header-search')) searchResults.classList.remove('show');
    });
    document.addEventListener('keydown', function(e) {
      if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
        e.preventDefault();
        searchInput.focus();
      }
      if (e.key === 'Escape') {
        searchResults.classList.remove('show');
        searchInput.blur();
      }
    });

    document.querySelectorAll('.side-nav-item[data-content]').forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        var file = this.getAttribute('data-content');
        if (file) {
          loadContent(file);
          document.querySelectorAll('.side-nav-item.active').forEach(function(a) { a.classList.remove('active'); });
          this.classList.add('active');
        }
      });
    });

    // 左侧分组展开 / 收起
    document.querySelectorAll('.side-nav-group-title').forEach(function(title) {
      title.addEventListener('click', function () {
        var group = this.parentElement;
        group.classList.toggle('open');
      });
    });

    // 左侧导航滚动时显示滚动条
    var sideNav = document.querySelector('.side-nav');
    var scrollTimer;
    if (sideNav) {
      sideNav.addEventListener('scroll', function() {
        sideNav.classList.add('is-scrolling');
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(function() { sideNav.classList.remove('is-scrolling'); }, 800);
      });
    }

    // 主内容区滚动时显示滚动条 + 锚点高亮
    var bodyScrollTimer;
    window.addEventListener('scroll', function() {
      document.documentElement.classList.add('is-scrolling');
      document.body.classList.add('is-scrolling');
      clearTimeout(bodyScrollTimer);
      bodyScrollTimer = setTimeout(function() {
        document.documentElement.classList.remove('is-scrolling');
        document.body.classList.remove('is-scrolling');
      }, 800);
      updateAnchorHighlight();
    });
  </script>
</body>
</html>
